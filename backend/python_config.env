# Python Environment Configuration for Node.js Backend
# Add this configuration to ensure Python scripts work correctly on Render

# Environment Variables for render.yaml
PYTHON_EXECUTABLE=/usr/bin/python3
PYTHON_VERSION=3.11
OPENCV_LOG_LEVEL=ERROR
NUMBA_DISABLE_JIT=1
LD_LIBRARY_PATH=/usr/lib/x86_64-linux-gnu:/usr/local/lib
PYTHONPATH=/opt/render/project/src/backend

# For Node.js child_process calls, use:
# const pythonExecutable = process.env.PYTHON_EXECUTABLE || 'python3';

# Example Node.js code to verify Python/OpenCV:
"""
const { spawn } = require('child_process');
const path = require('path');

function verifyPythonOpenCV() {
  return new Promise((resolve, reject) => {
    const pythonProcess = spawn(process.env.PYTHON_EXECUTABLE || 'python3', [
      path.join(__dirname, 'scripts', 'verify_opencv.py')
    ]);

    let output = '';
    pythonProcess.stdout.on('data', (data) => {
      output += data.toString();
    });

    pythonProcess.stderr.on('data', (data) => {
      console.error(`Python Error: ${data}`);
    });

    pythonProcess.on('close', (code) => {
      if (code === 0) {
        console.log('OpenCV verification successful');
        resolve(output);
      } else {
        reject(new Error(`Python process exited with code ${code}`));
      }
    });
  });
}

// Call during server startup:
// verifyPythonOpenCV().then(() => {
//   console.log('Python/OpenCV ready');
//   // Start your server
// }).catch(err => {
//   console.error('Python/OpenCV verification failed:', err);
//   process.exit(1);
// });
"""